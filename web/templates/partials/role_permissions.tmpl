{{define "role_permissions"}}
<form hx-put="/gui/roles/{{.RoleID}}/permissions"
      hx-target="#permissions-modal-body"
      hx-swap="innerHTML">
    <div class="modal-body">
        <p class="text-muted small mb-3">
            Select the permissions for role <strong>{{.RoleName}}</strong>.
        </p>
        {{if .Permissions}}
        <div class="row">
            {{range .Permissions}}
            <div class="col-md-6 mb-2">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox"
                           name="permission_ids" value="{{.ID}}"
                           id="perm-{{.ID}}"
                           {{if .Checked}}checked{{end}}>
                    <label class="form-check-label" for="perm-{{.ID}}">
                        <span class="fw-semibold">{{.Resource}}:{{.Action}}</span>
                        {{if .Description}}
                        <br><small class="text-muted">{{.Description}}</small>
                        {{end}}
                    </label>
                </div>
            </div>
            {{end}}
        </div>
        {{else}}
        <div class="text-center text-muted py-3">
            <i class="bi bi-lock fs-3"></i>
            <p class="mt-2 mb-0">No permissions defined yet.</p>
        </div>
        {{end}}
    </div>
    <div class="modal-footer border-0">
        <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-dismiss="modal">Cancel</button>
        <button type="submit" class="btn btn-primary btn-sm">
            <i class="bi bi-check-lg me-1"></i>Save Permissions
        </button>
    </div>
</form>
{{end}}
